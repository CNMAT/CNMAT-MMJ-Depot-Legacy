max v2;#N vpatcher 2 39 640 478;#P newex 40 175 55 196617 r tick-tock;#P toggle 40 196 15 0;#P newex 40 214 62 196617 metro 1000;#P message 40 235 58 196617 peak_reset;#P user multiSlider 12 262 267 151 0. 1000. 16 2681 31;#N vpatcher 50 40 596 452;#P comment 187 52 124 196617 Using two metronomes avoids executing too many samppeek~s at a time;#P button 53 284 15 0;#P outlet 69 364 15 0;#P newex 69 330 255 196617 pack 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.;#P newex 85 164 108 196617 samppeek~ fft-sample;#P newex 117 200 108 196617 samppeek~ fft-sample;#P newex 149 236 108 196617 samppeek~ fft-sample;#P message 150 129 29 196617 0.14;#P newex 181 272 108 196617 samppeek~ fft-sample;#P message 182 129 29 196617 0.18;#P message 117 129 29 196617 0.1;#P message 85 129 29 196617 0.06;#P newex 213 164 108 196617 samppeek~ fft-sample;#P newex 245 200 108 196617 samppeek~ fft-sample;#P newex 277 236 108 196617 samppeek~ fft-sample;#P newex 309 272 108 196617 samppeek~ fft-sample;#P message 213 129 29 196617 0.22;#P message 245 129 29 196617 0.26;#P message 277 129 29 196617 0.3;#P message 309 129 29 196617 0.34;#P toggle 391 65 15 0;#P newex 391 82 56 196617 metro 100;#P newex 69 69 56 196617 metro 100;#P newex 69 28 57 196617 r tick-tock;#P toggle 69 52 15 0;#P newex 69 146 108 196617 samppeek~ fft-sample;#P message 69 111 29 196617 0.04;#P newex 101 182 108 196617 samppeek~ fft-sample;#P message 134 111 29 196617 0.12;#P newex 133 218 108 196617 samppeek~ fft-sample;#P newex 165 254 108 196617 samppeek~ fft-sample;#P message 166 111 29 196617 0.16;#P newex 197 146 108 196617 samppeek~ fft-sample;#P newex 229 182 108 196617 samppeek~ fft-sample;#P newex 261 218 108 196617 samppeek~ fft-sample;#P newex 293 254 108 196617 samppeek~ fft-sample;#P message 229 111 29 196617 0.24;#P message 261 111 29 196617 0.28;#P message 197 111 29 196617 0.2;#P message 293 111 29 196617 0.32;#P message 101 111 29 196617 0.08;#P newex 391 46 41 196617 pipe 50;#P connect 36 0 38 3;#P connect 35 0 38 5;#P connect 33 0 38 7;#P connect 29 0 38 9;#P connect 28 0 38 11;#P connect 27 0 38 13;#P connect 26 0 38 15;#P connect 20 0 31 0;#P connect 20 0 34 0;#P connect 20 0 32 0;#P connect 20 0 25 0;#P connect 20 0 24 0;#P connect 20 0 23 0;#P connect 20 0 22 0;#P connect 19 0 15 0;#P connect 19 0 1 0;#P connect 19 0 13 0;#P connect 19 0 10 0;#P connect 19 0 3 0;#P connect 19 0 5 0;#P connect 19 0 4 0;#P connect 19 0 2 0;#P connect 18 0 17 0;#P connect 18 0 0 0;#P connect 16 0 38 0;#P connect 14 0 38 2;#P connect 12 0 38 4;#P connect 11 0 38 6;#P connect 9 0 38 8;#P connect 8 0 38 10;#P connect 7 0 38 12;#P connect 6 0 38 14;#P connect 0 0 21 0;#P connect 38 0 39 0;#P connect 34 0 35 0;#P connect 32 0 33 0;#P connect 31 0 36 0;#P connect 30 0 37 0;#P connect 17 0 19 0;#P connect 37 0 40 0;#P connect 20 0 30 0;#P connect 37 0 38 1;#P connect 40 0 38 0;#P connect 25 0 29 0;#P connect 24 0 28 0;#P connect 23 0 27 0;#P connect 22 0 26 0;#P connect 15 0 16 0;#P connect 13 0 12 0;#P connect 10 0 11 0;#P connect 21 0 20 0;#P connect 5 0 8 0;#P connect 4 0 7 0;#P connect 3 0 9 0;#P connect 2 0 6 0;#P connect 1 0 14 0;#P pop;#P newobj 12 150 95 196617 p samppeak_to_list;#P user uslider 417 118 13 59 128 1 0 0;#P comment 6 10 622 196622 TUTORIAL 18 - A spectrum analyzer using the fft~ object;#P comment 131 142 188 196617 samppeek~ reports the value in a sample table at a specific location given in milliseconds. Here we use a metronome to poll fft-sample at 16 locations which correspond to 16 frequency bins of the FFT. Use the oscillator input (or a calculator) to see to which frequencies these points correspond.;#P comment 442 242 150 196617 fft~ sends out a bang when it has finished with each window. This triggers recording of FFT data into sample memory.;#P comment 417 106 54 196617 Frequency;#P comment 349 123 60 196617 Signal input;#P comment 85 33 30 196617 Off;#P comment 6 33 26 196617 On;#P newex 482 183 51 196617 sig~ 0.05;#P newex 453 317 108 196617 table~ fft-sample 500;#P newex 416 338 113 196617 sampwrite~ fft-sample;#P newex 445 122 30 196617 * 10;#P number 445 142 63 9 0 0 0 3;#P newex 445 161 39 196617 sig~;#P newex 445 183 35 196617 osc1~;#P newex 445 205 47 196617 *~;#P newex 350 159 29 196617 adc~;#P newex 350 243 77 196617 fft~ 512 512 0;#P newex 350 274 27 196617 *~;#P newex 383 274 27 196617 *~;#P newex 350 307 27 196617 +~;#P newex 350 138 31 196617 r dac;#P newex 350 223 27 196617 +~;#P newex 350 184 29 196617 +~;#P comment 493 207 100 196617 sine wave generator;#P message 6 48 58 196617 \; dac start \; tick-tock 1;#P message 85 48 58 196617 \; dac stop \; tick-tock 0;#P comment 190 40 401 196617 Arguments for fft~ are number of sample points per FFT \, the number of points between the beginnings of successive FFTs \, and offset (if the second and third arguments are a and b \, respectively \, then analysis take place on samples b \, a+b 2a+b ...).;#P comment 6 98 245 196617 The power spectrum is the sum of the squares of the real and imaginary parts of the fft~ object's output.;#P connect 20 0 13 1;#P connect 5 0 6 0;#P connect 29 0 30 0;#P connect 15 0 14 0;#P connect 16 0 15 0;#P connect 6 0 11 0;#P connect 7 0 12 0;#P connect 13 0 6 1;#P connect 8 0 18 0;#P connect 14 0 13 0;#P connect 12 0 5 0;#P connect 12 1 5 1;#P connect 11 0 10 0;#P connect 11 0 10 1;#P connect 11 1 9 0;#P connect 11 1 9 1;#P connect 11 2 18 0;#P connect 28 0 17 0;#P connect 17 0 16 0;#P connect 9 0 8 1;#P connect 10 0 8 0;#P connect 31 0 30 0;#P connect 32 0 31 0;#P connect 34 0 33 0;#P connect 33 0 32 0;#P pop;