max v2;#N vpatcher 3 42 637 477;#P newex 219 83 45 196617 sig~ 0.1;#P newex 181 110 48 196617 *~;#P comment 4 22 431 196622 TUTORIAL 11 - Soundfile recording and playback \, Part II;#P comment 68 429 200 196617 Wait 3000 ms to make 3 second sound file.;#P comment 101 356 264 196617 Close gate to keep out multiple triggers from threshold~.;#P comment 195 305 235 196617 Bang from threshold~ triggers soundfile recording.;#P comment 63 288 101 196617 X means writesf is ready to record \, so start singin'!;#P comment 70 222 127 196617 Wait 2 seconds for the soundfile to be created.;#P comment 183 182 190 196617 "open" message opens or creates a soundfile and readies it for recording.;#P comment 66 154 201 196617 Click here to "arm" recorder \, wait for X in toggle below \, and sing into microphone.;#P comment 474 93 118 196617 Click here to play sound.;#P comment 181 43 245 196617 This patch automates the preparation and recording of soundfiles \, using delays and the threshold~ object.;#P comment 219 241 167 196617 Threshold~ sends a bang when incoming signal exceeds 0.01 in amplitude.;#P comment 453 193 232 196617 Wait two seconds before sending message "1" which tells readsf~ to read from beginning to end.;#P comment 565 135 156 196617 "open" message opens soundfile and readies it for reading.;#P comment 471 446 131 196617 "r write_it" receives timed commands intended for writesf~ module.;#P comment 231 118 140 196617 Signal is sent as "sig-in" to threshold~ and writesf~.;#P comment 17 113 58 196617 RECORDING;#P message 60 74 45 196617 \; dac stop;#P message 10 74 49 196617 \; dac start;#P comment 60 60 22 196617 Off;#P comment 10 60 19 196617 On;#P newex 181 69 29 196617 adc~;#P newex 181 90 29 196617 +~;#P newex 181 131 42 196617 s sig-in;#P comment 114 94 35 196617 INPUT;#P message 18 484 55 196617 \; write_it 0;#P message 28 394 55 196617 \; write_it 1;#P message 27 182 155 196617 \; write_it open /tmp/earslam.snd;#P newex 410 436 54 196617 r write_it;#P comment 372 336 48 196617 writesf~;#P newex 373 390 111 196617 delwrite~ beginning 50;#P newex 373 363 42 196617 r sig-in;#P newex 395 415 105 196617 delread~ beginning 50;#P newex 395 464 48 196617 writesf~;#P comment 85 396 254 196617 "1" starts recording into previously opened sound file.;#P newex 18 428 48 196617 del 3000;#P button 18 456 23 0;#P message 18 259 14 196617 1;#P button 18 361 23 0;#P message 86 356 14 196617 0;#P newex 18 333 27 196617 gate;#P toggle 18 286 43 0;#P button 170 308 24 0;#P newex 170 255 42 196617 r sig-in;#P newex 170 281 105 196617 threshold~ 0.01 1000;#P button 18 132 46 0;#P newex 18 225 48 196617 del 2000;#P comment 425 62 55 196617 PLAYBACK;#P button 424 78 46 0;#P newex 377 212 31 196617 r dac;#P newex 424 268 29 196617 dac~;#P newex 424 232 43 196617 readsf~;#P message 424 206 14 196617 1;#P newex 424 175 48 196617 del 2000;#P message 449 143 114 196617 open /tmp/earslam.snd;#P comment 429 314 136 196617 A small delay makes sure that the beginning of the soundfile is not lost in the time it takes for threshold~ to react and start the recording.;#P connect 16 0 14 0;#P connect 3 0 4 0;#P connect 1 0 4 0;#P connect 18 0 14 0;#P connect 34 0 33 0;#P connect 34 1 33 1;#P connect 33 0 55 0;#P connect 27 0 22 0;#P connect 24 0 25 0;#P connect 23 0 22 0;#P connect 14 0 15 0;#P connect 20 0 19 0;#P connect 15 0 17 0;#P connect 12 0 11 0;#P connect 19 0 30 0;#P connect 17 0 20 0;#P connect 17 0 29 0;#P connect 17 0 16 0;#P connect 11 0 13 0;#P connect 13 0 15 1;#P connect 9 0 18 0;#P connect 4 0 5 1;#P connect 2 0 3 0;#P connect 55 0 32 0;#P connect 56 0 55 1;#P connect 10 0 9 0;#P connect 10 0 28 0;#P connect 7 0 2 0;#P connect 4 0 5 0;#P connect 7 0 1 0;#P connect 6 0 5 0;#P pop;