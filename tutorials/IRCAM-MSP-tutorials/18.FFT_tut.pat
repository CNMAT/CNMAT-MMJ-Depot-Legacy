max v2;#N vpatcher 2 39 640 483;#P user uslider 444 80 13 59 128 1 0 0;#P comment 6 1 622 196622 TUTORIAL 18 - A spectrum analyzer using the fft~ object;#P comment 376 385 124 196617 Using two metronomes avoids executing too many samppeek~s at a time;#P comment 264 324 345 196617 samppeek~ reports the value in a sample table at a specific location given in milliseconds. Here we use a metronome to poll fft-sample at 16 locations which correspond to 16 frequency bins of the FFT. Use the oscillator input (or a calculator) to see to which frequencies these points correspond.;#P comment 469 204 150 196617 fft~ sends out a bang when it has finished with each window. This triggers recording of FFT data into sample memory.;#P comment 444 68 54 196617 Frequency;#P comment 376 85 60 196617 Signal input;#P comment 85 24 30 196617 Off;#P comment 6 24 26 196617 On;#P newex 316 83 41 196617 pipe 50;#P message 35 119 29 196617 0.08;#P message 227 119 29 196617 0.32;#P message 131 119 29 196617 0.2;#P message 195 119 29 196617 0.28;#P message 163 119 29 196617 0.24;#P newex 227 262 108 196617 samppeek~ fft-sample;#P newex 195 226 108 196617 samppeek~ fft-sample;#P newex 163 190 108 196617 samppeek~ fft-sample;#P newex 131 154 108 196617 samppeek~ fft-sample;#P message 100 119 29 196617 0.16;#P newex 99 262 108 196617 samppeek~ fft-sample;#P newex 67 226 108 196617 samppeek~ fft-sample;#P message 68 119 29 196617 0.12;#P newex 35 190 108 196617 samppeek~ fft-sample;#P message 3 119 29 196617 0.04;#P newex 3 154 108 196617 samppeek~ fft-sample;#P toggle 258 84 15 0;#P newex 258 65 57 196617 r tick-tock;#P newex 258 101 56 196617 metro 100;#P newex 316 119 56 196617 metro 100;#P toggle 316 102 15 0;#P message 243 137 29 196617 0.34;#P message 211 137 29 196617 0.3;#P message 179 137 29 196617 0.26;#P message 147 137 29 196617 0.22;#P newex 243 280 108 196617 samppeek~ fft-sample;#P newex 211 244 108 196617 samppeek~ fft-sample;#P newex 179 208 108 196617 samppeek~ fft-sample;#P newex 147 172 108 196617 samppeek~ fft-sample;#P slider 243 299 15 128 0 1;#P slider 227 299 15 128 0 1;#P slider 211 299 15 128 0 1;#P slider 195 299 15 128 0 1;#P slider 179 299 15 128 0 1;#P slider 163 299 15 128 0 1;#P slider 147 299 15 128 0 1;#P slider 131 299 15 128 0 1;#P message 19 137 29 196617 0.06;#P message 51 137 29 196617 0.1;#P message 116 137 29 196617 0.18;#P newex 115 280 108 196617 samppeek~ fft-sample;#P message 84 137 29 196617 0.14;#P newex 83 244 108 196617 samppeek~ fft-sample;#P newex 51 208 108 196617 samppeek~ fft-sample;#P newex 19 172 108 196617 samppeek~ fft-sample;#P slider 115 299 15 128 0 1;#P slider 99 299 15 128 0 1;#P slider 83 299 15 128 0 1;#P slider 67 299 15 128 0 1;#P slider 51 299 15 128 0 1;#P slider 35 299 15 128 0 1;#P slider 19 299 15 128 0 1;#P slider 3 299 15 128 0 1;#P newex 509 145 51 196617 sig~ 0.05;#P newex 480 279 108 196617 table~ fft-sample 500;#P newex 443 300 113 196617 sampwrite~ fft-sample;#P newex 472 84 30 196617 * 10;#P number 472 104 63 9 0 0 0 3;#P newex 472 123 39 196617 sig~;#P newex 472 145 35 196617 osc1~;#P newex 472 167 47 196617 *~;#P newex 377 121 29 196617 adc~;#P newex 377 205 77 196617 fft~ 512 512 0;#P newex 377 236 27 196617 *~;#P newex 410 236 27 196617 *~;#P newex 377 269 27 196617 +~;#P newex 377 100 31 196617 r dac;#P newex 377 185 27 196617 +~;#P newex 377 146 29 196617 +~;#P comment 520 169 100 196617 sine wave generator;#P message 6 39 58 196617 \; dac start \; tick-tock 1;#P message 85 39 58 196617 \; dac stop \; tick-tock 0;#P comment 145 25 401 196617 Arguments for fft~ are number of sample points per FFT \, the number of points between the beginnings of successive FFTs \, and offset (if the second and third arguments are a and b \, respectively \, then analysis take place on samples b \, a+b 2a+b ...).;#P comment 6 89 245 196617 The power spectrum is the sum of the squares of the real and imaginary parts of the fft~ object's output.;#P connect 16 0 15 0;#P connect 70 0 67 0;#P connect 69 0 66 0;#P connect 64 0 63 0;#P connect 74 0 53 0;#P connect 67 0 41 0;#P connect 66 0 39 0;#P connect 65 0 37 0;#P connect 62 0 25 0;#P connect 53 0 54 0;#P connect 48 0 44 0;#P connect 47 0 42 0;#P connect 61 0 62 0;#P connect 46 0 40 0;#P connect 30 0 24 0;#P connect 60 0 23 0;#P connect 29 0 22 0;#P connect 58 0 21 0;#P connect 59 0 58 0;#P connect 56 0 57 0;#P connect 56 0 74 0;#P connect 15 0 14 0;#P connect 52 0 48 0;#P connect 17 0 16 0;#P connect 33 0 28 0;#P connect 51 0 47 0;#P connect 45 0 38 0;#P connect 14 0 13 0;#P connect 12 0 5 0;#P connect 12 1 5 1;#P connect 50 0 46 0;#P connect 49 0 45 0;#P connect 73 0 60 0;#P connect 36 0 29 0;#P connect 11 0 10 0;#P connect 11 0 10 1;#P connect 11 1 9 0;#P connect 11 1 9 1;#P connect 11 2 18 0;#P connect 35 0 30 0;#P connect 34 0 33 0;#P connect 68 0 43 0;#P connect 32 0 31 0;#P connect 9 0 8 1;#P connect 8 0 18 0;#P connect 7 0 12 0;#P connect 63 0 27 0;#P connect 55 0 59 0;#P connect 55 0 73 0;#P connect 55 0 61 0;#P connect 55 0 64 0;#P connect 55 0 71 0;#P connect 55 0 69 0;#P connect 55 0 70 0;#P connect 55 0 72 0;#P connect 57 0 55 0;#P connect 54 0 36 0;#P connect 54 0 35 0;#P connect 54 0 32 0;#P connect 54 0 34 0;#P connect 54 0 49 0;#P connect 54 0 50 0;#P connect 54 0 51 0;#P connect 54 0 52 0;#P connect 6 0 11 0;#P connect 5 0 6 0;#P connect 20 0 13 1;#P connect 13 0 6 1;#P connect 10 0 8 0;#P connect 31 0 26 0;#P connect 83 0 17 0;#P connect 71 0 65 0;#P connect 72 0 68 0;#P pop;