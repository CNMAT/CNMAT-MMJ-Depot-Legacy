max v2;#N vpatcher 188 228 994 686;#P newex 663 76 50 1 r interdel;#N vpatcher 365 196 999 757;#P newex 369 334 31 1 + 1;#P newex 327 332 31 1 i;#P newex 348 292 45 1 i 0;#P newex 327 370 73 1 sel 0 1;#P newex 492 216 105 1 r $1-num-notes;#P newex 452 243 50 1 i;#P comment 503 179 50 1 number of notes;#P newex 310 524 86 1 s $1-expB;#P message 243 507 43 1 record;#P newex 452 504 131 1 pack 0 60 64 200 1;#P newex 310 411 152 1 sel;#P message 310 464 31 1 stop;#P newex 310 434 50 1 t b b;#P newex 138 157 325 1 t b b b b;#P newex 138 185 30 1 i 1;#P newex 138 312 55 1 gate;#P toggle 139 286;#P newex 41 304 44 1 i 0;#P newex 40 273 50 1 r reset;#P newex 138 68 83 1 r $1-rec-fin;#P message 264 89 144 1 \; $1-print record fin;#P message 48 453 144 1 \; $1-print got fin;#P comment 173 227 50 1 incoming notes;#P inlet 183 262 15;#P newex 182 283 50 1 t b i;#P newex 485 448 40 1 t b b;#P newex 485 475 40 1 timer;#P connect 23 1 0 0;#P connect 23 2 16 0;#P connect 25 0 23 0;#P connect 24 0 25 1;#P connect 13 2 24 0;#P connect 13 0 12 0;#P connect 13 1 18 0;#P connect 13 3 21 0;#P connect 14 0 9 0;#P connect 14 1 1 0;#P connect 14 0 15 0;#P connect 16 0 14 0;#P connect 9 0 10 0;#P connect 12 0 10 0;#P connect 10 0 11 0;#P connect 11 0 25 0;#P connect 1 0 0 0;#P connect 1 1 0 1;#P connect 25 0 26 0;#P connect 26 0 25 1;#P connect 0 0 17 0;#P connect 16 1 1 0;#P connect 8 0 9 0;#P connect 22 0 21 1;#P connect 17 0 19 0;#P connect 15 0 19 0;#P connect 18 0 19 0;#P connect 7 0 13 0;#P connect 21 0 16 1;#P connect 7 0 6 0;#P connect 14 0 5 0;#P connect 3 0 2 0;#P connect 2 0 11 1;#P connect 2 1 17 1;#P pop;#P newobj 130 57 114 1 patcher record_B;#N vpatcher 238 61 917 740;#P newex 318 366 73 1 sel 0 1;#P newex 302 532 93 1 s $1-expA;#P newex 302 419 152 1 sel;#P newex 444 512 131 1 pack 0 60 64 200 1;#P message 235 515 43 1 record;#P message 301 499 31 1 stop;#P newex 302 442 50 1 t b b;#P comment 132 86 50 1 number of notes;#P comment 181 228 50 1 incoming notes;#P newex 33 266 50 1 r reset;#P newex 34 297 44 1 i 0;#P toggle 132 279;#P newex 131 305 55 1 gate;#P newex 131 150 323 1 t b b b i;#P newex 359 328 31 1 + 1;#P newex 317 326 31 1 i;#P newex 131 178 30 1 i 1;#P newex 132 122 103 1 r $1-num-notes;#P newex 338 287 45 1 i 0;#P message 32 459 50 1 \; $1-print got debut;#P inlet 176 257 15;#P newex 176 279 50 1 t b i;#P newex 467 475 40 1 timer;#P newex 467 448 40 1 t b b;#P connect 10 2 5 0;#P connect 5 0 8 1;#P connect 23 2 21 0;#P connect 23 1 1 0;#P connect 8 0 23 0;#P connect 21 0 17 0;#P connect 14 0 13 0;#P connect 21 1 0 0;#P connect 1 0 20 0;#P connect 9 0 8 1;#P connect 8 0 9 0;#P connect 0 1 1 1;#P connect 0 0 1 0;#P connect 11 0 8 0;#P connect 12 0 11 0;#P connect 7 0 12 0;#P connect 13 0 12 0;#P connect 17 0 18 0;#P connect 17 1 0 0;#P connect 17 0 13 0;#P connect 10 0 7 0;#P connect 10 1 19 0;#P connect 20 0 22 0;#P connect 18 0 22 0;#P connect 19 0 22 0;#P connect 6 0 10 0;#P connect 10 3 21 1;#P connect 17 0 4 0;#P connect 3 0 2 0;#P connect 2 0 11 1;#P connect 2 1 20 1;#P pop;#P newobj 6 62 114 1 patcher record_A;#P comment 455 56 66 1 explode 1;#P comment 353 111 87 1 end of note loop;#P outlet 485 117 15;#N explode;#X restore;#X stop;#P newobj 313 54 136 1 explode;#N vpatcher 278 122 764 522;#P message 182 77 96 1 start \, next;#P outlet 262 320 22;#P newex 174 214 50 1 - 1;#P comment 80 344 67 1 to number of playbacks;#P inlet 99 15 15;#P newex 99 37 38 1 t b b;#P newex 98 239 85 1 sel;#P newex 136 188 31 1 + 1;#P newex 98 184 31 1 i;#P message 126 66 35 1 next;#P outlet 125 96 15;#P outlet 97 321 15;#P newex 120 124 225 1 r $1-reset-play-loop;#P newex 175 187 209 1 r $1-num-notes;#P comment 146 99 133 1 out to rest of the world;#P newex 119 151 50 1 i 1;#P newex 183 51 232 1 r $1-init-playback;#P comment 211 149 127 1 re-init for each loop thru;#P comment 259 210 95 1 number of notes;#P connect 10 0 17 0;#P connect 16 0 12 1;#P connect 12 0 7 0;#P connect 14 0 13 0;#P connect 10 0 12 0;#P connect 13 0 10 0;#P connect 10 0 11 0;#P connect 11 0 10 1;#P connect 13 1 9 0;#P connect 9 0 8 0;#P connect 5 0 16 0;#P connect 2 0 18 0;#P connect 18 0 8 0;#P connect 6 0 3 0;#P connect 3 0 10 1;#P pop;#P newobj 345 89 291 1 patcher playback_loop;#P newex 313 29 254 1 r $1-expA;#P newex 8 82 140 1 r $1-rec-debut;#P message 164 102 140 1 \; $1-print record debut;#P newex 6 38 50 1 t i;#P toggle 642 32;#P newex 642 6 50 1 r fucker;#P inlet 762 14 15;#P inlet 713 15 15;#P newex 723 97 36 1 del;#P newex 723 72 36 1 t b i;#P newex 723 48 50 1 gate;#P number 626 138 35 1;#P comment 662 137 79 1 note index;#P newex 9 157 50 1 + 1;#P newex 320 400 99 1 r $1-print;#P newex 321 424 99 1 print $1;#P newex 9 134 129 1 unpack 0 0;#P newex 128 160 142 1 s $1-num-playbacks;#P message 9 211 229 1 1) record into first explode with arguments for number of notes and number of cycles \; 2) record into second explode with a bang message \; 3) playback interpolation cycles with a bang message \; 4) messages for first explode object \; 5) messages for second explode object \; 6) number of notes (unpacked from first argument) \; 7) number of playback cycles (unpacked from first argument also) \; 8) resets playback loop cycle \; 9) output of expression object \; 10) sort of init playback to send a start and next to outside world \; 11) pause playback \; 12 continue playback \;;#P newex 9 180 227 1 s $1-num-notes;#P comment 10 196 86 1 number of notes;#P comment 145 144 108 1 number of playbacks;#P outlet 569 326 15;#P newex 569 291 221 1 r $1-reset-play-loop;#P flonum 533 219 35 1;#P newex 424 268 234 1 r $1-expB;#P newex 312 359 250 1 s $1-expr-output;#P comment 510 127 84 1 next message to outside world;#N vpatcher 200 107 827 793;#P newex 347 485 50 1 r reset;#P newex 514 521 50 1 i 0;#P newex 346 529 50 1 i 0;#P newex 199 527 50 1 i 0;#P outlet 509 455 34;#P comment 482 655 128 1 end of everything signal;#P outlet 454 655 15;#P comment 302 628 50 1 loop for cycles;#P comment 163 362 50 1 next cycling;#P comment 227 448 74 1 interpolation step;#P comment 317 564 100 1 end of note loop>>;#P toggle 305 548;#P toggle 455 549;#P newex 455 520 50 1 i 1;#P newex 454 605 83 1 gate;#P inlet 419 556 15;#P newex 304 603 124 1 gate;#P newex 132 527 50 1 f 1.;#P comment 27 541 93 1 final cycle - with 1. as interpolation;#P outlet 131 555 15;#P newex 132 500 50 1 t b b;#P newex 35 208 50 1 del 0;#P comment 350 276 56 1 playback cycle loop;#P newex 305 209 50 1 t i b;#P comment 309 125 130 1 number of playback cycles;#P newex 254 123 50 1 + 1;#P newex 254 97 256 1 r $1-num-playbacks;#P newex 131 16 227 1 r $1-start;#P outlet 244 430 15;#P outlet 219 384 15;#P newex 243 297 30 1 / 1.;#P newex 173 209 45 1 i 0;#P newex 129 228 31 1 i;#P newex 171 237 31 1 + 1;#P newex 130 278 50 1 t i i;#P newex 131 309 97 1 sel;#P newex 131 149 133 1 i;#P newex 130 184 187 1 t b b i i i;#P newex 36 183 50 1 r interdel;#P newex 130 40 63 1 t b b b;#P newex 156 71 229 1 s $1-init-playback;#P message 413 60 77 1 \; interdel stop;#P connect 40 0 29 0;#P connect 18 1 40 0;#P connect 38 0 30 0;#P connect 21 1 38 0;#P connect 27 0 35 0;#P connect 18 0 30 0;#P connect 4 4 18 0;#P connect 26 0 27 1;#P connect 39 0 29 0;#P connect 28 0 29 0;#P connect 21 1 28 0;#P connect 29 0 27 0;#P connect 16 0 5 1;#P connect 15 0 16 0;#P connect 7 0 37 0;#P connect 24 0 22 0;#P connect 6 1 12 0;#P connect 11 0 13 0;#P connect 10 0 9 1;#P connect 8 0 9 1;#P connect 9 0 8 0;#P connect 9 0 7 0;#P connect 7 1 11 0;#P connect 7 0 6 0;#P connect 20 0 9 0;#P connect 30 0 25 0;#P connect 26 0 25 1;#P connect 25 0 20 0;#P connect 41 0 39 0;#P connect 39 0 30 0;#P connect 5 0 4 0;#P connect 4 3 11 1;#P connect 4 2 6 1;#P connect 4 1 10 0;#P connect 4 0 9 0;#P connect 6 0 21 0;#P connect 21 0 24 0;#P connect 3 0 20 0;#P connect 2 1 1 0;#P connect 2 0 5 0;#P connect 14 0 2 0;#P connect 2 2 0 0;#P pop;#P newobj 345 157 389 1 patcher number_of_playbacks;#P comment 355 178 61 1 final cycle;#P comment 450 179 62 1 next cycle;#P newex 345 198 81 1 t b f;#N vpatcher 162 193 997 770;#P newex 67 214 50 1 r interdel;#P newex 218 94 46 1 i 1;#P message 133 134 50 1 stop;#P newex 275 115 45 1 r reset;#P newex 31 69 292 1 t b b b b;#P inlet 32 43 15;#P newex 218 236 53 1 del;#P newex 218 210 53 1 t b i;#P toggle 218 162;#P newex 218 184 55 1 gate;#P newex 218 262 55 1 t b b;#P newex 275 143 45 1 i 0;#P message 263 289 30 1 next;#P message 217 288 30 1 next;#P inlet 284 43 15;#P comment 304 45 59 1 next cycle;#P comment 55 42 59 1 last cycle;#P comment 361 112 94 1 reset play loop;#P comment 359 188 99 1 output from expr;#P newex 359 89 220 1 s $1-reset-play-loop;#P newex 357 163 236 1 r $1-expr-output;#P message 125 285 66 1 start;#P message 31 285 66 1 start;#P newex 350 235 197 1 r $1-continue;#P newex 45 107 165 1 r $1-pause;#P newex 24 360 249 1 s $1-expA;#P newex 125 339 249 1 s $1-expB;#P connect 26 0 20 0;#P connect 3 0 16 0;#P connect 2 0 24 0;#P connect 24 0 20 0;#P connect 23 0 24 0;#P connect 16 1 14 0;#P connect 21 0 22 0;#P connect 16 0 13 0;#P connect 20 0 16 0;#P connect 17 0 19 0;#P connect 15 0 18 0;#P connect 23 0 15 0;#P connect 25 0 18 0;#P connect 19 1 20 1;#P connect 19 0 20 0;#P connect 18 0 17 0;#P connect 22 0 4 0;#P connect 22 1 5 0;#P connect 22 2 25 0;#P connect 12 0 22 0;#P connect 6 0 17 1;#P connect 22 3 7 0;#P connect 4 0 1 0;#P connect 13 0 1 0;#P connect 14 0 0 0;#P connect 5 0 0 0;#P pop;#P newobj 345 225 105 1 patcher start_playback;#N explode;#X restore;#X stop;#P newobj 423 293 111 1 explode;#P comment 353 296 66 1 explode 2;#P number 721 185 35 1;#P comment 707 209 67 1 cycle index;#P outlet 626 182 15;#P comment 575 198 126 1 end of everything signal;#P comment 546 236 106 1 interpolation factor (between 0 and 1);#P newex 313 319 231 1 expr (\\\$f1 * (1. - \\\$f3) + \\\$f2 * \\\$f3 + .5);#P message 723 120 50 1 next;#P newex 6 15 50 1 r pitch;#P connect 50 0 34 0;#P connect 38 0 32 0;#P connect 37 0 38 0;#P connect 36 0 32 1;#P connect 32 0 33 0;#P connect 33 1 34 1;#P connect 33 0 34 0;#P connect 18 0 2 2;#P connect 9 0 2 1;#P connect 44 0 2 0;#P connect 2 0 16 0;#P connect 14 3 5 0;#P connect 14 4 7 0;#P connect 43 2 31 0;#P connect 43 1 45 0;#P connect 43 0 14 0;#P connect 14 2 18 0;#P connect 44 1 43 0;#P connect 14 1 10 1;#P connect 11 0 10 0;#P connect 14 0 11 0;#P connect 11 1 18 0;#P connect 26 1 25 0;#P connect 19 0 20 0;#P connect 17 0 9 0;#P connect 42 0 44 0;#P connect 41 0 26 0;#P connect 28 0 27 0;#P connect 41 0 40 0;#P connect 39 0 49 0;#P connect 39 0 48 0;#P connect 26 0 29 0;#P connect 29 0 23 0;#P connect 34 0 1 0;#P connect 1 0 45 0;#P connect 0 0 39 0;#P pop;