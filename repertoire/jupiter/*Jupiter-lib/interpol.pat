max v2;#N vpatcher 169 185 935 607;#P newex 262 309 231 1 expr (\\\$i1 * (1. - \\\$i3) + \\\$i2 * \\\$i3 + .5);#P newex 291 395 50 1 print;#P number 307 263 35 1;#P number 273 253 35 1;#P flonum 482 209 35 1;#P newex 263 33 136 1 r $1-expA;#P newex 373 258 109 1 r $1-expB;#P newex 261 349 131 1 s $1-expr-output;#P newex 518 276 137 1 r $1-reset-play-loop;#P outlet 518 311 15;#P number 574 118 35 1;#P comment 616 119 79 1 note index;#N vpatcher 76 376 476 776;#P newex 183 51 118 1 r $1-init-playback;#P message 182 77 96 1 start \, next;#P comment 146 99 133 1 out to rest of the world;#P comment 273 189 95 1 number of notes;#P newex 175 187 95 1 r $1-num-notes;#P newex 120 124 111 1 r $1-reset-play-loop;#P comment 235 127 127 1 re-init for each loop thru;#P outlet 97 321 15;#P outlet 125 96 15;#P message 126 66 35 1 next;#P newex 98 184 31 1 i;#P newex 136 188 31 1 + 1;#P newex 98 239 85 1 sel;#P newex 99 37 38 1 t b b;#P inlet 99 15 15;#P comment 80 344 67 1 to number of playbacks;#P newex 119 151 50 1 i 0;#P newex 174 214 50 1 - 1;#P outlet 262 320 57;#P connect 17 0 10 0;#P connect 18 0 17 0;#P connect 14 0 1 0;#P connect 13 0 2 0;#P connect 9 0 10 0;#P connect 5 1 9 0;#P connect 7 0 8 1;#P connect 8 0 7 0;#P connect 5 0 8 0;#P connect 8 0 6 0;#P connect 4 0 5 0;#P connect 6 0 11 0;#P connect 2 0 8 1;#P connect 1 0 6 1;#P connect 8 0 0 0;#P pop;#P newobj 295 93 291 1 patcher playback_loop;#N explode;#X restore;#X stop;#P newobj 263 58 136 1 explode;#P outlet 435 121 15;#P comment 459 117 84 1 next message to outside world;#N vpatcher 200 107 827 793;#P newex 130 184 187 1 t b b i i i;#P newex 131 149 133 1 i;#P newex 131 309 97 1 sel;#P newex 130 278 50 1 t i i;#P newex 171 237 31 1 + 1;#P newex 129 228 31 1 i;#P newex 173 209 45 1 i 0;#P newex 243 297 30 1 / 1.;#P outlet 219 384 15;#P outlet 244 430 15;#P newex 196 60 107 1 s $1-init-playback;#P newex 131 16 105 1 r $1-playback;#P newex 130 40 63 1 t b b;#P newex 254 97 134 1 r $1-num-playbacks;#P newex 254 123 50 1 + 1;#P comment 309 125 130 1 number of playback cycles;#P newex 305 209 50 1 t i b;#P comment 350 276 56 1 playback cycle loop;#P newex 35 208 50 1 del 0;#P newex 132 500 50 1 t b b;#P outlet 131 555 15;#P comment 27 541 93 1 final cycle - with 1. as interpolation;#P newex 132 527 50 1 f 1.;#P newex 304 603 124 1 gate;#P inlet 419 556 15;#P newex 454 605 83 1 gate;#P newex 455 520 50 1 i 1;#P toggle 455 549;#P toggle 305 548;#P comment 317 564 100 1 end of note loop>>;#P comment 227 448 74 1 interpolation step;#P comment 163 362 50 1 next cycling;#P comment 302 628 50 1 loop for cycles;#P outlet 454 655 15;#P comment 482 655 128 1 end of everything signal;#P outlet 509 455 34;#P newex 199 527 50 1 i 0;#P newex 346 529 50 1 i 0;#P newex 514 521 50 1 i 0;#P newex 347 485 50 1 r reset;#P connect 27 1 29 0;#P connect 27 0 38 0;#P connect 28 0 27 0;#P connect 20 0 17 0;#P connect 37 0 20 0;#P connect 39 0 34 0;#P connect 39 1 33 0;#P connect 39 2 37 1;#P connect 39 3 32 1;#P connect 38 0 39 0;#P connect 2 0 11 0;#P connect 0 0 2 0;#P connect 16 0 21 0;#P connect 15 0 16 1;#P connect 11 0 16 0;#P connect 21 0 34 0;#P connect 36 0 37 0;#P connect 36 1 32 0;#P connect 34 0 36 0;#P connect 34 0 35 0;#P connect 35 0 34 1;#P connect 33 0 34 1;#P connect 32 0 30 0;#P connect 37 1 31 0;#P connect 17 0 19 0;#P connect 36 0 4 0;#P connect 26 0 25 0;#P connect 25 0 38 1;#P connect 12 0 14 0;#P connect 20 1 13 0;#P connect 13 0 12 0;#P connect 2 0 12 0;#P connect 15 0 14 1;#P connect 39 4 23 0;#P connect 23 0 11 0;#P connect 14 0 6 0;#P connect 20 1 3 0;#P connect 3 0 11 0;#P connect 23 1 1 0;#P connect 1 0 12 0;#P pop;#P newobj 294 147 389 1 patcher number_of_playbacks;#P comment 303 115 87 1 end of note loop;#P comment 304 168 61 1 final cycle;#P comment 399 169 62 1 next cycle;#P newex 294 188 81 1 t b f;#N vpatcher 474 -16 982 361;#P newex 125 336 85 1 s $1-expB;#P newex 31 336 85 1 s $1-expA;#P newex 357 163 121 1 r $1-expr-output;#P newex 359 89 105 1 s $1-reset-play-loop;#P comment 359 188 99 1 output from expr;#P comment 361 112 94 1 reset play loop;#P comment 55 42 59 1 last cycle;#P comment 304 45 59 1 next cycle;#P inlet 284 43 15;#P message 217 288 30 1 next;#P message 263 289 30 1 next;#P newex 275 143 45 1 i 0;#P newex 218 262 55 1 t b b;#P newex 218 184 55 1 gate;#P toggle 218 162;#P newex 218 210 53 1 t b i;#P newex 218 236 53 1 del;#P inlet 32 43 15;#P newex 31 69 292 1 t b b b b;#P message 125 285 66 1 start \, next;#P message 31 285 66 1 start \, next;#P newex 275 115 45 1 r reset;#P message 133 134 50 1 stop;#P newex 218 94 46 1 i 1;#P newex 133 106 82 1 r $1-pause;#P newex 133 236 82 1 r $1-continue;#P connect 6 0 25 0;#P connect 15 0 25 0;#P connect 16 0 24 0;#P connect 5 0 24 0;#P connect 7 3 22 0;#P connect 23 0 12 1;#P connect 17 0 7 0;#P connect 7 2 2 0;#P connect 7 1 6 0;#P connect 7 0 5 0;#P connect 11 0 12 0;#P connect 10 0 9 0;#P connect 10 1 9 1;#P connect 2 0 11 0;#P connect 4 0 14 0;#P connect 14 0 11 0;#P connect 12 0 10 0;#P connect 9 0 13 0;#P connect 13 0 16 0;#P connect 8 0 7 0;#P connect 13 1 15 0;#P connect 4 0 3 0;#P connect 3 0 9 0;#P connect 1 0 3 0;#P connect 0 0 13 0;#P pop;#P newobj 294 215 105 1 patcher start_playback;#N explode;#X restore;#X stop;#P newobj 372 283 111 1 explode;#P comment 405 60 66 1 explode 1;#P comment 302 286 66 1 explode 2;#P newex 8 130 107 1 s $1-num-notes;#P comment 8 152 86 1 number of notes;#P newex 127 132 109 1 s $1-num-playbacks;#P comment 129 154 108 1 number of playbacks;#P newex 8 106 129 1 unpack 0 0;#N vpatcher 364 45 993 587;#P newex 139 127 83 1 r $1-rec-fin;#P newex 309 473 86 1 s $1-expB;#P newex 490 216 105 1 r $1-num-notes;#P comment 172 247 50 1 incoming notes;#P inlet 182 282 15;#P newex 40 273 50 1 r reset;#P message 242 456 43 1 record;#P newex 451 453 131 1 pack 0 60 64 200 1;#P newex 451 429 40 1 timer;#P newex 451 402 40 1 t b b;#P newex 309 360 152 1 sel;#P newex 41 304 44 1 i 0;#P toggle 139 286;#P newex 138 312 55 1 gate;#P newex 330 293 45 1 i 1;#P message 309 413 31 1 stop;#P newex 309 383 50 1 t b b;#P newex 351 335 31 1 + 1;#P newex 309 333 31 1 i;#P newex 138 185 30 1 i 1;#P newex 450 243 50 1 i;#P comment 501 179 50 1 number of notes;#P newex 138 157 323 1 t b b b b;#P connect 22 0 0 0;#P connect 16 0 21 0;#P connect 7 0 21 0;#P connect 15 0 21 0;#P connect 20 0 2 1;#P connect 18 0 9 1;#P connect 17 0 11 0;#P connect 12 1 13 0;#P connect 4 0 12 0;#P connect 14 0 15 0;#P connect 5 0 4 1;#P connect 4 0 5 0;#P connect 13 1 14 1;#P connect 13 0 14 0;#P connect 9 0 4 0;#P connect 10 0 9 0;#P connect 3 0 10 0;#P connect 11 0 10 0;#P connect 8 0 4 1;#P connect 12 0 6 0;#P connect 6 0 7 0;#P connect 6 1 13 0;#P connect 6 0 11 0;#P connect 2 0 12 1;#P connect 0 3 2 0;#P connect 0 2 8 0;#P connect 0 2 14 0;#P connect 0 1 16 0;#P connect 0 0 3 0;#P pop;#P newobj 60 34 114 1 patcher record_B;#P inlet 6 14 20;#N vpatcher 276 55 905 597;#P newex 132 122 103 1 r $1-num-notes;#P newex 302 466 93 1 s $1-expA;#P inlet 176 273 15;#P newex 131 178 30 1 i 1;#P newex 302 326 31 1 i;#P newex 344 328 31 1 + 1;#P newex 323 286 45 1 i 1;#P newex 131 150 323 1 t b b b i;#P newex 131 305 55 1 gate;#P toggle 132 279;#P newex 34 297 44 1 i 0;#P newex 302 353 152 1 sel;#P newex 444 395 40 1 t b b;#P newex 444 422 40 1 timer;#P newex 444 446 131 1 pack 0 60 64 200 1;#P message 235 449 43 1 record;#P newex 33 266 50 1 r reset;#P comment 181 228 50 1 incoming notes;#P comment 132 86 50 1 number of notes;#P message 301 433 31 1 stop;#P newex 302 376 50 1 t b b;#P connect 20 0 13 0;#P connect 5 0 19 0;#P connect 1 0 19 0;#P connect 6 0 19 0;#P connect 18 0 12 1;#P connect 13 2 14 0;#P connect 13 3 9 1;#P connect 13 2 7 0;#P connect 13 1 5 0;#P connect 13 0 17 0;#P connect 0 0 10 0;#P connect 0 1 8 0;#P connect 0 0 1 0;#P connect 14 0 16 1;#P connect 10 0 11 0;#P connect 17 0 11 0;#P connect 11 0 12 0;#P connect 12 0 16 0;#P connect 8 0 7 0;#P connect 8 1 7 1;#P connect 16 0 15 0;#P connect 15 0 16 1;#P connect 7 0 6 0;#P connect 16 0 9 0;#P connect 9 1 8 0;#P connect 4 0 10 0;#P connect 9 0 0 0;#P pop;#P newobj 7 58 114 1 patcher record_A;#P newex 8 82 103 1 r $1-rec-debut;#P message 9 170 229 1 1) record into first explode with arguments for number of notes and number of cycles \; 2) record into second explode with a bang message \; 3) playback interpolation cycles with a bang message \; 4) messages for first explode object \; 5) messages for second explode object \; 6) number of notes (unpacked from first argument) \; 7) number of playback cycles (unpacked from first argument also) \; 8) resets playback loop cycle \; 9) output of expression object \; 10) sort of init playback to send a start and next to outside world \; 11) pause playback \; 12 continue playback \;;#P number 670 175 35 1;#P comment 656 199 67 1 cycle index;#P outlet 575 172 15;#P comment 524 188 126 1 end of everything signal;#P comment 495 226 106 1 interpolation factor (between 0 and 1);#P connect 35 0 39 2;#P connect 17 0 39 1;#P connect 26 0 39 0;#P connect 39 0 32 0;#P connect 36 0 39 0;#P connect 37 0 39 1;#P connect 39 0 38 0;#P connect 6 0 10 0;#P connect 34 0 26 0;#P connect 10 0 14 0;#P connect 33 0 17 0;#P connect 31 0 30 0;#P connect 10 1 12 0;#P connect 19 1 35 0;#P connect 23 0 19 0;#P connect 19 0 18 0;#P connect 23 1 18 1;#P connect 26 1 27 0;#P connect 23 2 35 0;#P connect 27 0 23 0;#P connect 27 1 25 0;#P connect 8 0 7 0;#P connect 8 0 9 0;#P connect 27 2 29 0;#P connect 23 4 4 0;#P connect 23 3 2 0;#P pop;