max v2;#N vpatcher 240 90 534 388;#P inlet 124 33 15 0;#P inlet 54 33 15 0;#N vpatcher 277 137 695 464;#P newex 113 205 27 196617 1.;#P newex 113 225 27 196617 - 1.;#P newex 113 185 27 196617 t b f;#P newex 26 250 179 196617 biquad~ 0.001565 0. 0. -0.998435 0.;#P newex 158 225 32 196617 * -1.;#P comment 15 111 92 196617 square input signal;#P newex 26 92 27 196617 *~;#P inlet 26 52 15 0;#P comment 225 202 175 196617 Transfer function of averaging filter:;#P comment 267 237 30 196617 1 - a;#P comment 268 255 53 196617 1 - a z^-1;#P comment 228 275 131 196617 where a = 10^-3/(Tav*Fe);#P comment 226 245 118 196617 h(z) = ----------------;#P newex 267 107 52 196617 dspstate~;#P newex 288 131 41 196617 44100.;#P newex 113 94 27 196617 t f b;#P outlet 26 281 15 0;#P newex 113 73 93 196617 clip 0.001 999999;#P inlet 113 52 15 0;#P newex 113 155 185 196617 expr pow(10 \\\, -3/(0.001*$f1*$f2) );#P connect 13 0 16 0;#P connect 4 0 0 0;#P connect 4 1 5 0;#P connect 2 0 4 0;#P connect 0 0 17 0;#P connect 1 0 2 0;#P connect 6 1 5 0;#P connect 12 0 13 0;#P connect 12 0 13 1;#P connect 5 0 0 1;#P connect 19 0 18 0;#P connect 18 0 16 1;#P connect 17 0 19 0;#P connect 17 1 18 1;#P connect 17 1 15 0;#P connect 16 0 3 0;#P connect 15 0 16 4;#P pop;#P newobj 71 73 63 196617 patcher rms;#P comment 69 18 83 196617 threshold (dBFS);#P inlet 88 33 15 0;#P newex 71 148 27 196617 /~;#P newex 88 96 120 196617 expr pow(10.\\\,$f1/10.);#P comment 140 33 83 196617 attack time (ms);#P newex 88 119 39 196617 sig~ 1.;#P newex 54 229 27 196617 /~;#P outlet 54 255 15 0;#P newex 71 176 84 196617 clip~ 1. 999999.;#P newex 71 203 33 196617 sqrt~;#P connect 10 0 7 0;#P connect 6 0 4 0;#P connect 12 0 10 1;#P connect 4 0 7 1;#P connect 3 0 2 0;#P connect 1 0 0 0;#P connect 0 0 3 1;#P connect 7 0 1 0;#P connect 8 0 6 0;#P connect 11 0 3 0;#P connect 11 0 10 0;#P pop;