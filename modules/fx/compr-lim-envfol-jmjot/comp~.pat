max v2;#N vpatcher 203 107 655 580;#N vpatcher 277 137 695 464;#P newex 113 205 27 196617 1.;#P newex 113 225 27 196617 - 1.;#P newex 113 185 27 196617 t b f;#P newex 26 250 179 196617 biquad~ 0.001565 0. 0. -0.998435 0.;#P newex 158 225 32 196617 * -1.;#P comment 15 111 92 196617 square input signal;#P newex 26 92 27 196617 *~;#P inlet 26 52 15 0;#P comment 225 202 175 196617 Transfer function of averaging filter:;#P comment 267 237 30 196617 1 - a;#P comment 268 255 53 196617 1 - a z^-1;#P comment 228 275 131 196617 where a = 10^-3/(Tav*Fe);#P comment 226 245 118 196617 h(z) = ----------------;#P newex 267 107 52 196617 dspstate~;#P newex 288 131 41 196617 44100.;#P newex 113 94 27 196617 t f b;#P outlet 26 281 15 0;#P newex 113 73 93 196617 clip 0.001 999999;#P inlet 113 52 15 0;#P newex 113 155 185 196617 expr pow(10 \\\, -3/(0.001*$f1*$f2) );#P connect 19 0 18 0;#P connect 18 0 16 1;#P connect 17 0 19 0;#P connect 17 1 18 1;#P connect 17 1 15 0;#P connect 16 0 3 0;#P connect 15 0 16 4;#P connect 13 0 16 0;#P connect 12 0 13 0;#P connect 12 0 13 1;#P connect 6 1 5 0;#P connect 5 0 0 1;#P connect 4 0 0 0;#P connect 4 1 5 0;#P connect 2 0 4 0;#P connect 1 0 2 0;#P connect 0 0 17 0;#P pop;#P newobj 71 80 63 196617 patcher rms;#P inlet 54 47 15 0;#P outlet 54 429 15 0;#P newex 54 406 27 196617 /~;#P inlet 124 49 15 0;#P comment 59 37 83 196617 threshold (dBFS);#P inlet 88 49 15 0;#P newex 71 180 27 196617 /~;#P newex 88 125 120 196617 expr pow(10.\\\,$f1/10.);#P comment 142 49 83 196617 attack time (ms);#P newex 88 153 39 196617 sig~ 1.;#P newex 71 208 84 196617 clip~ 1. 999999.;#P newex 71 235 33 196617 sqrt~;#P newex 71 270 27 196617 *~;#P comment 259 50 31 196617 slope;#P inlet 241 49 15 0;#P newex 139 301 33 196617 sqrt~;#P newex 105 301 27 196617 *~;#P newex 139 331 27 196617 *~;#P newex 105 235 39 196617 sig~ 1.;#P newex 139 270 39 196617 sig~ 0.;#P newex 173 301 39 196617 sig~ 0.;#P newex 105 270 33 196617 sqrt~;#P newex 173 331 33 196617 sqrt~;#P newex 173 364 27 196617 *~;#P newex 207 331 39 196617 sig~ 0.;#P newex 241 200 74 196617 unpack 1 0 0 0;#P newex 241 69 66 196617 sel 1 2 4 8;#P message 269 138 41 196617 0 0 1 0;#P message 283 160 41 196617 0 0 0 1;#P message 255 117 41 196617 0 1 0 0;#P message 241 95 41 196617 1 0 0 0;#P connect 30 0 28 0;#P connect 30 0 31 0;#P connect 28 0 29 0;#P connect 27 0 31 1;#P connect 12 0 18 1;#P connect 11 0 14 1;#P connect 25 0 23 0;#P connect 16 0 4 0;#P connect 10 0 13 1;#P connect 13 0 28 1;#P connect 9 0 14 0;#P connect 9 0 15 0;#P connect 8 0 7 0;#P connect 7 0 28 1;#P connect 24 0 20 0;#P connect 23 0 21 0;#P connect 21 0 24 1;#P connect 20 0 19 0;#P connect 19 0 18 0;#P connect 19 0 9 0;#P connect 18 0 28 1;#P connect 15 0 13 0;#P connect 15 0 8 0;#P connect 14 0 28 1;#P connect 6 0 7 1;#P connect 5 0 12 0;#P connect 5 1 11 0;#P connect 5 2 10 0;#P connect 5 3 6 0;#P connect 4 0 0 0;#P connect 4 1 1 0;#P connect 4 2 3 0;#P connect 4 3 2 0;#P connect 3 0 5 0;#P connect 2 0 5 0;#P connect 1 0 5 0;#P connect 0 0 5 0;#P connect 31 0 24 0;#P pop;